# auth
鉴权微服务

## 综述
完全否决了使用OAuth作为抽象的方案，OAuth的Password方式是对内登录的封装，然而在真实场景中该方式完全无用。
当把OAuth看作纯粹的三方登录时，三方用户跳转请求弹窗，接下来调用原生登录，成功后继续OAuth流程是更完善的抽象，这种情况下原生字段足够支持整体流程。
因此，将auth切分为两个大类：原生账户管理，原生登录注册（包括三方）；对外提供OAuth登录。而对于接下来想做的事情：微服务SSO，OAuth几乎无用，真实起作用的是可以跨应用使用的（或者应用联盟使用的）JWT。

JWT要具有以下功能：
1. 可被本地验证（sdk支持，使用户可以在本地验证颁发的JWT有效）
2. 包含足够的基本信息（sdk支持，使用户可以在1的前提下本地获取userinfo）
3. 可远程销毁（对用户核心信息的修改、对应refresh，销毁颁发的令牌）
4. 可验证当前有效性（配合3）

auth的几个部件：
1. 标识用户（user）
2. 签发token（jwt）
3. 识别token

## 登录类型和方式组合表

|Type\Method|UNSET|PASSWORD|CODE|
|---:|:---:|:---:|:---:|
|**UNSET**|-|-|-|
|**ACCOUNT**|-|用户密码登录|-|
|**EMAIL**|-|邮箱密码登录|邮箱验证码快速登录|
|**PHONE**|-|手机密码登录|短信验证码快速登录|
|**GITHUB**|-|-|Github三方登录|

- 使用Password登录：unique传对应类型的唯一值，secret传密码
- 使用Code登录：unique传对应类型的唯一值，secret传验证码；对于三方登录，只需要secret传code
